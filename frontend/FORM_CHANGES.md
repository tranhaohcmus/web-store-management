# Product Creation Form - Change Summary

## What Changed

### âŒ REMOVED: Product Type Field

**Before:**

```
[Loáº¡i sáº£n pháº©m*] [ThÆ°Æ¡ng hiá»‡u*] [Danh má»¥c*]
```

**After:**

```
[ThÆ°Æ¡ng hiá»‡u*] [Danh má»¥c*]
```

The Product Type dropdown has been removed from the UI. It is now **automatically selected** based on the category.

---

## Current Form Layout

### Section 1: Product Information

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ThÃ´ng Tin Sáº£n Pháº©m                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚ TÃªn sáº£n pháº©m *                                          â”‚
â”‚ [________________________________]                      â”‚
â”‚                                                          â”‚
â”‚ MÃ´ táº£                                                    â”‚
â”‚ [________________________________]                      â”‚
â”‚ [________________________________]                      â”‚
â”‚ [________________________________]                      â”‚
â”‚ [________________________________]                      â”‚
â”‚                                                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚ â”‚ ThÆ°Æ¡ng hiá»‡u *       â”‚ Danh má»¥c *          â”‚         â”‚
â”‚ â”‚ [Select Brand â–¼]    â”‚ [Select Category â–¼] â”‚         â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                          â”‚
â”‚ Tráº¡ng thÃ¡i                                              â”‚
â”‚ [NhÃ¡p â–¼]                                                â”‚
â”‚                                                          â”‚
â”‚ HÃ¬nh áº£nh *                                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚
â”‚ â”‚  [Upload Icon]      â”‚                                â”‚
â”‚ â”‚  Click to upload    â”‚                                â”‚
â”‚ â”‚  PNG, JPG (max 5MB) â”‚                                â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Section 2: Product Variants (Appears after selecting Category)

**Example: When "GiÃ y Ä‘Ã¡ bÃ³ng" is selected**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Biáº¿n Thá»ƒ Sáº£n Pháº©m (0)                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚ â”Œâ”€ ThÃªm biáº¿n thá»ƒ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚ â”‚                                                  â”‚    â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚    â”‚
â”‚ â”‚ â”‚ KÃ­ch cá»¡ *â”‚ MÃ u sáº¯c  â”‚ Loáº¡i Ä‘áº¿ *â”‚             â”‚    â”‚
â”‚ â”‚ â”‚ [41 â–¼]   â”‚ [Color â–¼]â”‚ [FG â–¼]   â”‚             â”‚    â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚    â”‚
â”‚ â”‚                                                  â”‚    â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚
â”‚ â”‚ â”‚ GiÃ¡ (Ä‘) *â”‚ GiÃ¡ KM   â”‚ Tá»“n kho  â”‚          â”‚  â”‚    â”‚
â”‚ â”‚ â”‚ [2000000]â”‚ [      ] â”‚ [0     ] â”‚ [+ ThÃªm] â”‚  â”‚    â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚
â”‚ â”‚                                                  â”‚    â”‚
â”‚ â”‚ SKU tá»± Ä‘á»™ng: NIKE-MERCURIAL-41-XANHDÆ¯Æ NG-FG     â”‚    â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                          â”‚
â”‚ CÃ¡c biáº¿n thá»ƒ Ä‘Ã£ thÃªm:                                   â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”    â”‚
â”‚ â”‚ KÃ­ch cá»¡: 41 | MÃ u sáº¯c: Xanh dÆ°Æ¡ng | Loáº¡i Ä‘áº¿: FG â”‚ ğŸ—‘ â”‚    â”‚
â”‚ â”‚ SKU: NIKE-MERCURIAL-41-XANHDÆ¯Æ NG-FG | GiÃ¡: 2000000Ä‘  â”‚    â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[Há»§y]  [Táº¡o Sáº£n Pháº©m]
```

---

## How Attributes Are Determined

### Category â†’ Product Type â†’ Attributes Flow

```
User selects                Auto-selected           Attributes shown
Category                    Product Type            (from database)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
GiÃ y Ä‘Ã¡ bÃ³ng (4)      â†’    GiÃ y ÄÃ¡ BÃ³ng (1)   â†’    KÃ­ch cá»¡* âœ“
                                                     MÃ u sáº¯c
                                                     Loáº¡i Ä‘áº¿* âœ“

Ão Ä‘áº¥u (8)            â†’    Ão Äáº¥u (2)         â†’    (No attributes)

Quáº§n Ä‘áº¥u (9)          â†’    Quáº§n Short (3)     â†’    (No attributes)
```

### Mapping Logic (in code):

```javascript
const categoryToProductTypeMap = {
  4: 1, // GiÃ y Ä‘Ã¡ bÃ³ng â†’ GiÃ y ÄÃ¡ BÃ³ng
  5: 1, // GiÃ y cháº¡y bá»™ â†’ GiÃ y ÄÃ¡ BÃ³ng
  6: 1, // GiÃ y bÃ³ng rá»• â†’ GiÃ y ÄÃ¡ BÃ³ng
  7: 1, // GiÃ y tennis â†’ GiÃ y ÄÃ¡ BÃ³ng
  15: 1, // GiÃ y FG â†’ GiÃ y ÄÃ¡ BÃ³ng
  16: 1, // GiÃ y TF â†’ GiÃ y ÄÃ¡ BÃ³ng
  17: 1, // GiÃ y IC â†’ GiÃ y ÄÃ¡ BÃ³ng
  8: 2, // Ão Ä‘áº¥u â†’ Ão Äáº¥u
  9: 3, // Quáº§n Ä‘áº¥u â†’ Quáº§n Short
  13: 4, // Táº¥t Ä‘Ã¡ bÃ³ng â†’ Táº¥t BÃ³ng ÄÃ¡
  11: 5, // GÄƒng tay thá»§ mÃ´n â†’ Phá»¥ Kiá»‡n
  12: 5, // BÃ³ng Ä‘Ã¡ â†’ Phá»¥ Kiá»‡n
  14: 5, // TÃºi Ä‘á»±ng giÃ y â†’ Phá»¥ Kiá»‡n
};
```

---

## Database Structure (ERD Compliance)

### Tables Involved:

```
CATEGORIES
â”œâ”€â”€ id: 4
â”œâ”€â”€ name: "GiÃ y Ä‘Ã¡ bÃ³ng"
â””â”€â”€ slug: "giay-da-bong"

        â†“ (mapped in frontend code)

PRODUCT_TYPES
â”œâ”€â”€ id: 1
â”œâ”€â”€ name: "GiÃ y ÄÃ¡ BÃ³ng"
â””â”€â”€ code: "soccer_cleat"

        â†“ (junction table)

PRODUCT_TYPE_ATTRIBUTES
â”œâ”€â”€ product_type_id: 1
â”œâ”€â”€ attribute_id: 1 (KÃ­ch cá»¡)
â”œâ”€â”€ is_required: true
â””â”€â”€ display_order: 1

        â†“ (defines)

ATTRIBUTES                    ATTRIBUTE_VALUES
â”œâ”€â”€ id: 1                    â”œâ”€â”€ id: 1, value: "39"
â”œâ”€â”€ name: "KÃ­ch cá»¡"          â”œâ”€â”€ id: 2, value: "40"
â”œâ”€â”€ code: "size"             â”œâ”€â”€ id: 3, value: "41"
â””â”€â”€ type: "select"           â”œâ”€â”€ id: 4, value: "42"
                             â”œâ”€â”€ id: 5, value: "43"
                             â””â”€â”€ id: 6, value: "44"
```

### When Product is Created:

```
PRODUCTS
â”œâ”€â”€ id: [auto]
â”œâ”€â”€ name: "Nike Mercurial"
â”œâ”€â”€ product_type_id: 1 â† Auto-set from category
â”œâ”€â”€ category_id: 4     â† User selected
â”œâ”€â”€ brand_id: 2        â† User selected
â””â”€â”€ default_image_url: "/upload/..."

        â†“

PRODUCT_VARIANTS
â”œâ”€â”€ id: [auto]
â”œâ”€â”€ product_id: [from above]
â”œâ”€â”€ sku: "NIKE-MERCURIAL-41-XANHDÆ¯Æ NG-FG" â† Auto-generated
â”œâ”€â”€ price: 2000000
â””â”€â”€ physical_stock: 0

        â†“ (junction table)

VARIANT_ATTRIBUTE_VALUES
â”œâ”€â”€ variant_id: [from above]
â”œâ”€â”€ attribute_id: 1, attribute_value_id: 3  (KÃ­ch cá»¡: 41)
â”œâ”€â”€ attribute_id: 2, attribute_value_id: 7  (Loáº¡i Ä‘áº¿: FG)
â””â”€â”€ attribute_id: 3, attribute_value_id: 10 (MÃ u sáº¯c: Xanh dÆ°Æ¡ng)
```

---

## Key Features

âœ… **Removed SKU input field** - Now auto-generated from product name + attributes  
âœ… **Removed Product Type dropdown** - Auto-selected based on category  
âœ… **Dynamic attributes** - Show/hide based on selected category  
âœ… **Required validation** - KÃ­ch cá»¡ and Loáº¡i Ä‘áº¿ are required for soccer cleats  
âœ… **ERD compliance** - Follows exact database structure  
âœ… **Multiple variants** - Can add as many as needed before submission

---

## Testing the Form

1. **Go to**: http://localhost:5173/admin/products/new
2. **Fill in**:
   - Name: "Nike Mercurial Vapor 15"
   - Brand: "Nike"
   - Category: **"GiÃ y Ä‘Ã¡ bÃ³ng"** â† This triggers attributes!
3. **Observe**: 3 dropdowns appear (KÃ­ch cá»¡*, MÃ u sáº¯c, Loáº¡i Ä‘áº¿*)
4. **Select attributes**: Size=41, Color=Xanh dÆ°Æ¡ng, Sole=FG
5. **Enter price**: 2000000
6. **Click "ThÃªm"**: Variant added to list
7. **Upload image**
8. **Click "Táº¡o Sáº£n Pháº©m"**: Product + variant + attributes saved to DB

Expected Result:

- Product created in `Products` table
- Variant created in `ProductVariants` table with auto-generated SKU
- 3 records in `VariantAttributeValues` table (size, color, sole type)
